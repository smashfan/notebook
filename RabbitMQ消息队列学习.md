 **3.发布/订阅(publish/subscribe)**

我们在前面两部分将的都是将消息由生产者到消费者之间通过queue传递，现在将引入一个新的成员：exchange。

其实生产者在发送的时候是不知道消息要发送给那个queue的，甚至他都不知道消息是由queue接收的。实际上生产者只是把message发送给了exchange。至于message后续的处理都是由exchange决定的。

基本参考https://www.cnblogs.com/yinsedeyinse/p/10481056.html  





# 消息分发策略

当有多个消费者时，RabbitMQ将会轮流的将消息发送给消费者．这种分发消息的方式称为'round-robin'

# 消息容错机制

## 客户端崩溃

引入ack确认机制.客户端每成功消费一个消息，向服务器发送一个确认消息，通知服务器这条消息已经被成功消费.服务器收到消息后，将这条消息从unacknowledged中移除，否则，服务器就会一直等待客户端发来的ack消息.当客户端出现异常时，未消费的消息被重新放到消费队列中．这样避免了客户端崩溃造成的数据丢失.



作者：写写代码唱唱歌
链接：https://www.jianshu.com/p/18ffa93fe5d2
来源：简书
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。